<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Daoed.js</title>
    
    
    
        <meta name="keywords" content="blockstack, daoed, decentralization, blockchain" />
        <meta name="keyword" content="blockstack, daoed, decentralization, blockchain" />
    
    
    
    <meta property="og:title" content="DAOed.js"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    <meta property="og:site_name" content="Daoed.js"/>
    <meta property="og:url" content="https://github.com/DAOed/daoed.github.io"/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">

    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true,"includeDate":true},"navType ":"inline","linenums":true,"theme":"cerulean","copyright":"<a href='https://github.com/DAOed/daoed.github.io'>Daoed.js</a>","applicationName":"Daoed.js","disqus":"","googleAnalytics":"","openGraph":{"title":"DAOed.js","type":"website","site_name":"Daoed.js","url":"https://github.com/DAOed/daoed.github.io"},"meta":{"title":"Daoed.js","description":"","keyword":"blockstack, daoed, decentralization, blockchain"},"sourceLinks":true};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">Daoed.js</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentation">
    </div>
    <ul class="list">
    
        <h3 class="typeHeading">Modules</h3>
        
            <li class="item" data-name="module-Cast.html">
                <span class="title">
                    <a href="module-Cast.html">Cast</a>
                    
                </span>
                <ul class="members itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="module:Cast~castAccounts"><a href="module-Cast.html#~castAccounts">castAccounts</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                </ul>
            </li>
        
            <li class="item" data-name="module-Constants.html">
                <span class="title">
                    <a href="module-Constants.html">Constants</a>
                    
                </span>
                <ul class="members itemMembers">
                
                <span class="subtitle">Members</span>
                
                    <li data-name="module:Constants~algorithmWeigth"><a href="module-Constants.html#~algorithmWeigth">algorithmWeigth</a></li>
                
                    <li data-name="module:Constants~avatarSize"><a href="module-Constants.html#~avatarSize">avatarSize</a></li>
                
                    <li data-name="module:Constants~baseBlockstackApi"><a href="module-Constants.html#~baseBlockstackApi">baseBlockstackApi</a></li>
                
                    <li data-name="module:Constants~constantWeigths"><a href="module-Constants.html#~constantWeigths">constantWeigths</a></li>
                
                    <li data-name="module:Constants~daoedPrefixer"><a href="module-Constants.html#~daoedPrefixer">daoedPrefixer</a></li>
                
                    <li data-name="module:Constants~defaultAvatarColors"><a href="module-Constants.html#~defaultAvatarColors">defaultAvatarColors</a></li>
                
                    <li data-name="module:Constants~historySize"><a href="module-Constants.html#~historySize">historySize</a></li>
                
                    <li data-name="module:Constants~socialWeigth"><a href="module-Constants.html#~socialWeigth">socialWeigth</a></li>
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                </ul>
                <ul class="events itemMembers">
                
                </ul>
            </li>
        
            <li class="item" data-name="module-Health.html">
                <span class="title">
                    <a href="module-Health.html">Health</a>
                    
                </span>
                <ul class="members itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="module:Health~apiHealth"><a href="module-Health.html#~apiHealth">apiHealth</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                </ul>
            </li>
        
            <li class="item" data-name="module-Helpers.html">
                <span class="title">
                    <a href="module-Helpers.html">Helpers</a>
                    
                </span>
                <ul class="members itemMembers">
                
                <span class="subtitle">Members</span>
                
                    <li data-name="module:Helpers~Cryptor"><a href="module-Helpers.html#~Cryptor">Cryptor</a></li>
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="module:Helpers~addHistory"><a href="module-Helpers.html#~addHistory">addHistory</a></li>
                
                    <li data-name="module:Helpers~client"><a href="module-Helpers.html#~client">client</a></li>
                
                    <li data-name="module:Helpers~filer"><a href="module-Helpers.html#~filer">filer</a></li>
                
                    <li data-name="module:Helpers~initialsAvatar"><a href="module-Helpers.html#~initialsAvatar">initialsAvatar</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                </ul>
            </li>
        
            <li class="item" data-name="module-Load.html">
                <span class="title">
                    <a href="module-Load.html">Load</a>
                    
                </span>
                <ul class="members itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="module:Load~loadAccount"><a href="module-Load.html#~loadAccount">loadAccount</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                </ul>
            </li>
        
            <li class="item" data-name="module-Quality.html">
                <span class="title">
                    <a href="module-Quality.html">Quality</a>
                    
                </span>
                <ul class="members itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="module:Quality~filterQuality"><a href="module-Quality.html#~filterQuality">filterQuality</a></li>
                
                    <li data-name="module:Quality~rankQuality"><a href="module-Quality.html#~rankQuality">rankQuality</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                </ul>
            </li>
        
            <li class="item" data-name="module-Schema.html">
                <span class="title">
                    <a href="module-Schema.html">Schema</a>
                    
                </span>
                <ul class="members itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="module:Schema~schemaAll"><a href="module-Schema.html#~schemaAll">schemaAll</a></li>
                
                    <li data-name="module:Schema~schemaOne"><a href="module-Schema.html#~schemaOne">schemaOne</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                </ul>
            </li>
        
            <li class="item" data-name="module-Search.html">
                <span class="title">
                    <a href="module-Search.html">Search</a>
                    
                </span>
                <ul class="members itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="typedefs itemMembers">
                
                </ul>
                <ul class="methods itemMembers">
                
                <span class="subtitle">Methods</span>
                
                    <li data-name="module:Search~searchAccounts"><a href="module-Search.html#~searchAccounts">searchAccounts</a></li>
                
                </ul>
                <ul class="events itemMembers">
                
                </ul>
            </li>
        
      
    </ul>
</div>

    <div class="main">
        <h1 class="page-title" data-filename="schema.js.html">Source: schema.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
* Schema module casts an account data object into a more organized form
* @module Schema
*/

import { algorithmWeigth, socialWeigth, constantWeigths } from "./constants";
import { initialsAvatar } from "./helpers";

/**
* @async
* @function schemaOne
* @param {object} accountData - account data object to cast/scheme
* @returns {object} returns account data object schemed/casted in the manner : {profile, social, details, apps, api}
*/
const schemaOne = (accountData) => {
  if (!accountData.fullyQualifiedName) accountData.fullyQualifiedName = accountData.username;

  const profile = accountData.profile;
  const account = profile.account || [];

  profile.address = profile.address || {};
  profile.image = profile.image || [];

  const avatar = profile.image.find((img) => img.name === "avatar") || {};
  const cover = profile.image.find((img) => img.name === "cover") || {};

  const facebook = account.find((acc) => acc.service === "facebook") || {};
  const twitter = account.find((acc) => acc.service === "twitter") || {};
  const linkedin = account.find((acc) => acc.service === "linkedin") || {};
  const github = account.find((acc) => acc.service === "github") || {};
  const steem = account.find((acc) => acc.service === "steem") || {};

  const bitcoin = account.find((acc) => acc.service === "bitcoin") || {};
  const ethereum = account.find((acc) => acc.service === "ethereum") || {};

  const website = (accountData.website || []).find((site) => site["@WebSite"] === "Website") || {};

  return {
    profile: {
      name: (profile.name || "").substr(0, 30),
      description: (profile.description || "").substr(0, 100),
      avatar: avatar.contentUrl,
      cover: cover.contentUrl,
      location: profile.address.addressLocality,
      initialsAvatar: avatar.contentUrl ? {} : initialsAvatar(profile.name || accountData.fullyQualifiedName),
      website: website.url
    },
    social: {
      facebook: facebook.identifier ? `https://fb.com/${facebook.identifier}` : null,
      twitter: twitter.identifier ? `https://twitter.com/${twitter.identifier}` : null,
      linkedin: linkedin.identifier ? `https://linkedin.com/in/${linkedin.identifier}` : null,
      steem: steem.identifier ? `https://steem.online/@${steem.identifier}` : null,
      github: github.identifier ? `https://github.com/${github.identifier}` : null
    },
    detail: {
      type: profile["@type"],
      identifier: accountData.fullyQualifiedName.split(".")[0],
      domain: accountData.fullyQualifiedName.substring(accountData.fullyQualifiedName.indexOf(".") + 1),
      username: accountData.username,
      id: accountData.fullyQualifiedName,
      gaia: accountData.profile &amp;&amp; accountData.profile.api ? new URL(accountData.profile.api.gaiaHubUrl).hostname : "",
      bitcoin: bitcoin.identifier,
      ethereum: ethereum.identifier
    },
    apps: profile.apps,
    api: profile.api
  };
};

/**
* @function schemaAll
* @param {array} accountsData - account data objects to cast/scheme
* @returns {array} returns array of account data objects schemed/casted in the manner @see {@link schemaOne}
*/
const schemaAll = (accountsData) => {
  return accountsData.map(schemaOne);
};

const Schema = { one: schemaOne, all: schemaAll };

export {
  Schema as default, schemaOne, schemaAll
};
</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Sat Jan 18 2020 14:59:42 GMT+0000 (Greenwich Mean Time)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
